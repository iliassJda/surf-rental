(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{25782:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95155),a=r(47647),n=r(97282),i=r(12115),c=r(85388),l=r(99794),o=r(29523);function d(){let{getAllBoards:e,resetBoards:t}=(0,a.K)(),{isConnected:r,connectWallet:d}=(0,n.v)(),[u,h]=(0,i.useState)([]),[m,x]=(0,i.useState)(!1),[w,p]=(0,i.useState)(null),[g,b]=(0,i.useState)(null),[f,y]=(0,i.useState)(null),[j,N]=(0,i.useState)(0),v=async()=>{if(r){x(!0),y(null);try{let t=await e();h(t),console.log("Fetched boards:",t)}catch(e){console.error("Failed to fetch boards from contract:",e),y(e.message||"Failed to fetch boards")}finally{x(!1)}}};(0,i.useEffect)(()=>{v()},[r,e,j]);let E=async()=>{p(null),b(null);let e=await (0,o.U)(),{errorMessage:r}=await t();r?p("[CONTRACT] "+r):p("[CONTRACT] Reset has been performed successfuly");let{error:s}=await e.from("Boards").delete().neq("id",-1);s?b("[SUPABASE] Error: "+s.message):b("[SUPABASE] Rows have been deleted")};return m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("p",{children:"Loading boards from smart contract..."})}):f?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-danger",children:"Error"}),(0,s.jsx)("p",{className:"text-default-600 mb-6",children:f}),(0,s.jsx)(c.T,{onPress:()=>window.location.reload(),color:"primary",variant:"bordered",children:"Retry"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"All Boards from Smart Contract"}),(0,s.jsxs)("p",{className:"text-default-600",children:["Found ",u.length," board(s)"]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-1.5",children:[(0,s.jsx)(c.T,{onPress:()=>{N(e=>e+1)},color:"primary",variant:"flat",isLoading:m,children:"Refresh Boards"}),(0,s.jsx)(c.T,{onPress:E,color:"secondary",variant:"flat",children:"Reset Contract"})]}),w&&(0,s.jsx)("div",{className:"mt-2 text-sm ".concat(w.includes("Error")?"text-danger":"text-success"),children:w}),g&&(0,s.jsx)("div",{className:"mt-2 text-sm ".concat(g.includes("Error")?"text-danger":"text-success"),children:g})]}),0===u.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-default-600",children:"No boards found in the smart contract"})}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(e=>(0,s.jsxs)("div",{className:"p-4 border border-default-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.description}),(0,s.jsxs)("span",{className:"text-xs bg-default-100 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,s.jsxs)("div",{className:"text-sm text-default-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Price:"})," ",l.ck(e.pricePerDay)," ETH/day"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Deposit:"})," ",l.ck(e.deposit)," ETH"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Owner:"})," ",e.owner.slice(0,6),"...",e.owner.slice(-4)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"}),(0,s.jsx)("span",{className:"ml-1 px-2 py-1 rounded text-xs ".concat(0===e.status?"bg-success-100 text-success-800":1===e.status?"bg-warning-100 text-warning-800":"bg-danger-100 text-danger-800"),children:0===e.status?"Ready":1===e.status?"Returned":void 0===e.status?"Goat Alexis":"Rented"})]}),e.renter&&"0x0000000000000000000000000000000000000000"!==e.renter&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Renter:"})," ",e.renter.slice(0,6),"...",e.renter.slice(-4)]})]})]},e.id||Math.random()))})]})}},29523:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(16620);function a(){return(0,s.createBrowserClient)("https://crejvlwlntwyezdtfofb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNyZWp2bHdsbnR3eWV6ZHRmb2ZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NjIwMzUsImV4cCI6MjA3NDQzODAzNX0.ut1DvOMlPcAz-DoOCyQMWgbQGLWca24u_LOunInrrTU")}},47647:(e,t,r)=>{"use strict";r.d(t,{K:()=>d});var s=r(51012),a=r(16836),n=r(8678),i=r(99794),c=r(17974),l=r(97282),o=r(12115);function d(){let{isConnected:e,account:t}=(0,l.v)(),r=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(console.log("production"),!e||t){let e=new a.FR("https://eth-sepolia.g.alchemy.com/v2/".concat("eLEtvSLC6nhEEel2Fahza"));return new n.NZ(c.m,c.A,e)}let r=(()=>{if(window.ethereum)return new s.k(window.ethereum);throw Error("Ethereum provider not found")})(),i=await r.getSigner();return new n.NZ(c.m,c.A,i)}catch(e){throw console.error("Failed to init contract",e),Error("Failed to initialize contract")}},d=async(e,t,s)=>{let a=await r(),n=i.g5(t),c=i.g5(s),l=await a.rentBoard(e,{value:n+c});await l.wait()};return{withdraw:async()=>{try{let e=await r(),t=await e.withdraw();return{receipt:await t.wait(),contract:e}}catch(e){console.error(e)}},getPendingWithdrawals:async e=>{try{let t=await r();return await t.pendingWithdrawals(e)}catch(e){console.error(e)}},returnDeposit:async(e,t)=>{try{let s=await r(),a=await s.returnDeposit(e.id,t);return{receipt:await a.wait(),contract:s}}catch(e){return{errorMessage:e}}},returnBoard:async e=>{try{let t=await r(),s=await t.returnBoard(e.id);return{receipt:await s.wait(),contract:t}}catch(e){return{errorMessage:e}}},rentBoard:d,listBoard:async(e,t,s)=>{let a,n,c=Number(t),l=Number(s);if(!Number.isFinite(c)||!Number.isFinite(l)||c<0||l<0)return{message:"Price and deposit must be valid positive numbers."};try{a=i.g5(t),n=i.g5(s)}catch(e){return console.error("Failed to parse ETH amounts:",e),{message:"Invalid number format. Use a dot for decimals, e.g., 2.12"}}let o=await r(),d=await o.listBoard(e,a,n);return{receipt:await d.wait(),contract:o}},getAllBoards:(0,o.useCallback)(async()=>{let e=await r(!0),t=await e.nextBoardId(),s=[];console.log("The next board id is: ",t);for(let r=0;r<Number(t);r++)try{let t=await e.boards(r),a={id:Number(t.id),description:t.description,owner:t.owner,renter:t.renter,pricePerDay:t.pricePerDay,deposit:t.deposit,status:Number(t.available)};console.log("board status = ",a.status),s.push(a)}catch(e){console.error("Failed to fetch board ".concat(r,":"),e)}return s},[e]),resetBoards:async()=>{try{let e=await r(),t=await e.resetBoards();return{receipt:await t.wait(),contract:e}}catch(e){return{errorMessage:e}}}}}},54504:(e,t,r)=>{Promise.resolve().then(r.bind(r,25782))}},e=>{e.O(0,[729,794,620,823,441,255,358],()=>e(e.s=54504)),_N_E=e.O()}]);