(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{29289:(e,r,t)=>{Promise.resolve().then(t.bind(t,48839)),Promise.resolve().then(t.bind(t,71527)),Promise.resolve().then(t.bind(t,93795)),Promise.resolve().then(t.t.bind(t,73677,23)),Promise.resolve().then(t.t.bind(t,49082,23)),Promise.resolve().then(t.t.bind(t,90408,23))},47647:(e,r,t)=>{"use strict";t.d(r,{K:()=>d});var a=t(51012),s=t(16836),i=t(8678),l=t(99794),n=t(17974),o=t(97282),c=t(12115);function d(){let{isConnected:e,account:r}=(0,o.v)(),t=async function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!e||r){let e=new s.FR("http://127.0.0.1:8545/");return new i.NZ(n.m,n.A,e)}let t=(()=>{if(window.ethereum)return new a.k(window.ethereum);throw Error("Ethereum provider not found")})(),l=await t.getSigner();return new i.NZ(n.m,n.A,l)}catch(e){throw console.error("Failed to init contract",e),Error("Failed to initialize contract")}},d=async(e,r,a)=>{let s=await t(),i=l.g5(r),n=l.g5(a),o=await s.rentBoard(e,{value:i+n});await o.wait()};return{withdraw:async()=>{try{let e=await t(),r=await e.withdraw();return{receipt:await r.wait(),contract:e}}catch(e){console.error(e)}},getPendingWithdrawals:async e=>{try{let r=await t();return await r.pendingWithdrawals(e)}catch(e){console.error(e)}},returnDeposit:async(e,r)=>{try{let a=await t(),s=await a.returnDeposit(e.id,r);return{receipt:await s.wait(),contract:a}}catch(e){return{errorMessage:e}}},returnBoard:async e=>{try{let r=await t(),a=await r.returnBoard(e.id);return{receipt:await a.wait(),contract:r}}catch(e){return{errorMessage:e}}},rentBoard:d,listBoard:async(e,r,a)=>{let s,i,n=Number(r),o=Number(a);if(!Number.isFinite(n)||!Number.isFinite(o)||n<0||o<0)return{message:"Price and deposit must be valid positive numbers."};try{s=l.g5(r),i=l.g5(a)}catch(e){return console.error("Failed to parse ETH amounts:",e),{message:"Invalid number format. Use a dot for decimals, e.g., 2.12"}}let c=await t(),d=await c.listBoard(e,s,i);return{receipt:await d.wait(),contract:c}},getAllBoards:(0,c.useCallback)(async()=>{let e=await t(!0),r=await e.nextBoardId(),a=[];console.log("The next board id is: ",r);for(let t=0;t<Number(r);t++)try{let r=await e.boards(t),s={id:Number(r.id),description:r.description,owner:r.owner,renter:r.renter,pricePerDay:r.pricePerDay,deposit:r.deposit,status:Number(r.available)};console.log("board status = ",s.status),a.push(s)}catch(e){console.error("Failed to fetch board ".concat(t,":"),e)}return a},[e]),resetBoards:async()=>{try{let e=await t(),r=await e.resetBoards();return{receipt:await r.wait(),contract:e}}catch(e){return{errorMessage:e}}}}}},48839:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>c});var a=t(95155);t(12115);var s=t(1296),i=t(20063),l=t(5379),n=t(97282),o=t(4256);function c(e){let{children:r,themeProps:t}=e,c=(0,i.useRouter)();return(0,a.jsx)(s.M,{navigate:c.push,children:(0,a.jsxs)(l.N,{...t,children:[(0,a.jsx)(o.tE,{}),(0,a.jsx)(n.r,{children:r})]})})}},71527:(e,r,t)=>{"use strict";t.d(r,{HotkeysProvider:()=>i});var a=t(85507),s=t(20063);function i(){let e=(0,s.useRouter)();return(0,a.vC)("k",r=>{r.preventDefault(),e.push("/admin")}),null}},73677:()=>{},93795:(e,r,t)=>{"use strict";t.d(r,{Navbar:()=>T});var a=t(95155),s=t(71996),i=t(78079),l=t(10959),n=t(12177),o=t(44470),c=t(85388),d=t(75998),h=t(52619),u=t.n(h),m=t(2821);let x={navItems:[{label:"Rent",href:"/rent"},{label:"List",href:"/list"},{label:"My Rentings",href:"/my-rentings"},{label:"Returnals",href:"/returnals"}]};var w=t(8954),p=t(64831),f=t(5379),g=t(74446),j=t(12115);let b=e=>{let{size:r=36,width:t,height:s,...i}=e;return(0,a.jsx)("svg",{fill:"none",height:r||s,viewBox:"0 0 32 32",width:r||t,...i,children:(0,a.jsx)("path",{clipRule:"evenodd",d:"M17.6482 10.1305L15.8785 7.02583L7.02979 22.5499H10.5278L17.6482 10.1305ZM19.8798 14.0457L18.11 17.1983L19.394 19.4511H16.8453L15.1056 22.5499H24.7272L19.8798 14.0457Z",fill:"currentColor",fillRule:"evenodd"})})},v=e=>{let{size:r=24,width:t,height:s,...i}=e;return(0,a.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:r||s,role:"presentation",viewBox:"0 0 24 24",width:r||t,...i,children:(0,a.jsx)("path",{d:"M21.53 15.93c-.16-.27-.61-.69-1.73-.49a8.46 8.46 0 01-1.88.13 8.409 8.409 0 01-5.91-2.82 8.068 8.068 0 01-1.44-8.66c.44-1.01.13-1.54-.09-1.76s-.77-.55-1.83-.11a10.318 10.318 0 00-6.32 10.21 10.475 10.475 0 007.04 8.99 10 10 0 002.89.55c.16.01.32.02.48.02a10.5 10.5 0 008.47-4.27c.67-.93.49-1.519.32-1.79z",fill:"currentColor"})})},y=e=>{let{size:r=24,width:t,height:s,...i}=e;return(0,a.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:r||s,role:"presentation",viewBox:"0 0 24 24",width:r||t,...i,children:(0,a.jsxs)("g",{fill:"currentColor",children:[(0,a.jsx)("path",{d:"M19 12a7 7 0 11-7-7 7 7 0 017 7z"}),(0,a.jsx)("path",{d:"M12 22.96a.969.969 0 01-1-.96v-.08a1 1 0 012 0 1.038 1.038 0 01-1 1.04zm7.14-2.82a1.024 1.024 0 01-.71-.29l-.13-.13a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.984.984 0 01-.7.29zm-14.28 0a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a1 1 0 01-.7.29zM22 13h-.08a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zM2.08 13H2a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zm16.93-7.01a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a.984.984 0 01-.7.29zm-14.02 0a1.024 1.024 0 01-.71-.29l-.13-.14a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.97.97 0 01-.7.3zM12 3.04a.969.969 0 01-1-.96V2a1 1 0 012 0 1.038 1.038 0 01-1 1.04z"})]})})},N=e=>{let{className:r,classNames:t}=e,{theme:s,setTheme:i}=(0,f.D)(),l=(0,g.wR)(),{Component:n,slots:o,isSelected:c,getBaseProps:d,getInputProps:h,getWrapperProps:u}=(0,p.K)({isSelected:"light"===s||l,"aria-label":"Switch to ".concat("light"===s||l?"dark":"light"," mode"),onChange:()=>{"light"===s?i("dark"):i("light")}});return(0,a.jsxs)(n,{...d({className:(0,m.A)("px-px transition-opacity hover:opacity-80 cursor-pointer",r,null==t?void 0:t.base)}),children:[(0,a.jsx)(w.s,{children:(0,a.jsx)("input",{...h()})}),(0,a.jsx)("div",{...u(),className:o.wrapper({class:(0,m.A)(["w-auto h-auto","bg-transparent","rounded-lg","flex items-center justify-center","group-data-[selected=true]:bg-transparent","!text-default-500","pt-px","px-0","mx-0"],null==t?void 0:t.wrapper)}),children:!c||l?(0,a.jsx)(y,{size:22}):(0,a.jsx)(v,{size:22})})]})};var P=t(97282),z=t(69492),k=t(140),C=t(19876),M=t(96423),B=t(63066),E=t(33099),F=t(47647),R=t(99794),S=t(4256);let T=()=>{let{isConnected:e,account:r,connectWallet:t,isLoading:h}=(0,P.v)(),{isOpen:w,onOpen:p,onOpenChange:f}=(0,z.j)(),[g,v]=(0,j.useState)(null),[y,T]=(0,j.useState)(!1),{getPendingWithdrawals:H,withdraw:L}=(0,F.K)(),W=async()=>{if(!r){v(null),p();return}try{let e=await H(r);if(null==e)v(null);else try{v(String(R.ck(e)))}catch(r){v(String(e.toString()))}}catch(e){console.error("Failed to fetch pending withdrawals",e),v(null)}finally{console.log(g,"is the pending amount of the following user: ",r),p()}},D=async()=>{T(!0);try{await L(),f(),(0,S.$U)({title:"Withdrawal Successfull",description:"".concat(g," has been withdrawn"),color:"success"}),v(null)}catch(e){console.error("Withdraw failed",e)}finally{T(!1)}};return(0,a.jsxs)(s.H,{maxWidth:"xl",position:"sticky",children:[(0,a.jsxs)(i.t,{className:"basis-1/5 sm:basis-full",justify:"start",children:[(0,a.jsx)(l.$,{as:"li",className:"gap-3 max-w-fit mx-4",children:(0,a.jsxs)(u(),{className:"flex justify-start items-center gap-1",href:"/",children:[(0,a.jsx)(b,{}),(0,a.jsx)("p",{className:"font-bold text-inherit",children:"SURF'IT"})]})}),(0,a.jsx)("ul",{className:"hidden lg:flex gap-4 justify-end",children:x.navItems.map(e=>(0,a.jsx)(n.p,{children:(0,a.jsx)(u(),{className:(0,m.A)((0,d.n)({color:"foreground"}),"data-[active=true]:text-primary data-[active=true]:font-medium"),color:"foreground",href:e.href,children:e.label})},e.href))})]}),(0,a.jsxs)(i.t,{className:"hidden sm:flex basis-1/5 sm:basis-full",justify:"end",children:[(0,a.jsx)(n.p,{className:"hidden sm:flex gap-2",children:(0,a.jsx)(N,{})}),(0,a.jsx)(n.p,{children:!h&&(e?(0,a.jsx)(c.T,{className:"text-sm font-normal text-default-600 bg-default-100",variant:"flat",size:"sm",children:r?"".concat(r.slice(0,6),"...").concat(r.slice(-4)):"Connected"}):(0,a.jsx)(c.T,{className:"text-sm font-normal",color:"primary",variant:"solid",size:"sm",onPress:t,children:"Connect Wallet"}))}),e?(0,a.jsx)(n.p,{children:(0,a.jsx)(c.T,{className:"text-sm font-normal",color:"primary",variant:"solid",size:"sm",onPress:W,children:"Withdraw your ETH"})}):null]}),(0,a.jsxs)(i.t,{className:"sm:hidden basis-1 pl-4",justify:"end",children:[(0,a.jsx)(N,{}),(0,a.jsx)(o.w,{})]}),(0,a.jsx)(k.Y,{isOpen:w,onOpenChange:f,backdrop:"blur",children:(0,a.jsx)(C.g,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.c,{className:"flex flex-col gap-1",children:"Confirm Withdraw"}),(0,a.jsx)(B.h,{children:(0,a.jsx)("div",{className:"space-y-4",children:g?(0,a.jsxs)("div",{className:"p-4 bg-default-50 dark:bg-default-100 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-default-600 mb-1",children:"Pending withdrawal"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:[g," ETH"]}),(0,a.jsx)("p",{className:"text-sm text-default-500 mt-2",children:"You can withdraw this amount to your wallet."})]}):(0,a.jsx)("div",{className:"p-4 bg-default-50 dark:bg-default-800 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-sm text-default-600",children:"No pending withdrawals available."})})})}),(0,a.jsxs)(E.q,{children:[(0,a.jsx)(c.T,{color:"danger",variant:"light",onPress:e,children:"Cancel"}),(0,a.jsx)(c.T,{color:"primary",variant:"shadow",onPress:D,isLoading:y,isDisabled:!g||0>=Number(g),children:"Withdraw"})]})]})})})]})}}},e=>{e.O(0,[138,431,729,794,427,272,831,793,823,441,255,358],()=>e(e.s=29289)),_N_E=e.O()}]);