(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{2276:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var s=r(95155),a=r(91264),i=r(4904),n=r(85388),l=r(97282),c=r(29523),o=r(12115),d=r(17974),u=r(99794),m=r(51012),p=r(8678);function b(){let e=(0,c.U)(),{isConnected:t,account:r,balance:b,connectWallet:h,isLoading:x}=(0,l.v)(),[f,w]=(0,o.useState)(!1),[v,N]=(0,o.useState)(null);if(!t)return(0,s.jsxs)("div",{className:"w-full max-w-xs text-center",children:[(0,s.jsx)("p",{className:"mb-4 text-default-600",children:"Please connect your wallet to list a board"}),(0,s.jsx)(n.T,{onPress:h,color:"primary",variant:"shadow",children:"Connect Wallet"})]});let y=async t=>{let s,a;t.preventDefault(),w(!0),N(null);let i=new FormData(t.currentTarget),n=i.get("description"),l=(i.get("priceperday")||"").replace(",",".").trim(),c=(i.get("deposit")||"").replace(",",".").trim();if(!l||!c){w(!1),N("Please provide both price and deposit.");return}let o=Number(l),b=Number(c);if(!Number.isFinite(o)||!Number.isFinite(b)||o<0||b<0){w(!1),N("Price and deposit must be valid positive numbers.");return}try{s=u.g5(l),a=u.g5(c)}catch(e){console.error("Failed to parse ETH amounts:",e),w(!1),N("Invalid number format. Use a dot for decimals, e.g., 2.12");return}try{var h;let t=new m.k(window.ethereum),i=await t.getSigner(),o=new p.NZ(d.m,d.A,i),u=await o.listBoard(n,s,a),b=(await u.wait()).logs.map(e=>{try{return o.interface.parseLog(e)}catch(e){return null}}).find(e=>(null==e?void 0:e.name)==="BoardListed"),x=null==b||null==(h=b.args)?void 0:h.boardId.toString();console.log("This is the boardId",x);let{data:f,error:w}=await e.from("Boards").insert([{id:x,description:n,owner:r,renter:"",pricePerDay:l,deposit:c,status:0}]);w?N("Error: ".concat(w.message)):(console.log("Data inserted successfully:",f),N("Board listed successfully!"))}catch(e){N("An unexpected error occurred")}finally{w(!1)}};return(0,s.jsx)("div",{className:"w-full max-w-xs",children:(0,s.jsxs)(a.l,{className:"w-full",onSubmit:y,children:[(0,s.jsx)(i.r,{isRequired:!0,label:"Description",labelPlacement:"outside",name:"description",placeholder:"Enter the board's description",type:"text"}),(0,s.jsx)(i.r,{isRequired:!0,label:"Price",labelPlacement:"outside",name:"priceperday",placeholder:"0.00",min:"0",step:"0.01",startContent:(0,s.jsx)("div",{className:"pointer-events-none flex items-center",children:(0,s.jsx)("span",{className:"text-default-400 text-small",children:"ETH"})}),type:"number"}),(0,s.jsx)(i.r,{isRequired:!0,label:"Deposit",labelPlacement:"outside",name:"deposit",placeholder:"0.00",min:"0",step:"0.01",startContent:(0,s.jsx)("div",{className:"pointer-events-none flex items-center",children:(0,s.jsx)("span",{className:"text-default-400 text-small",children:"ETH"})}),type:"number"}),(0,s.jsx)(n.T,{type:"submit",color:"primary",variant:"shadow",isLoading:f,disabled:f,children:f?"Listing...":"Submit"}),v&&(0,s.jsx)("div",{className:"mt-2 text-sm ".concat(v.includes("Error")?"text-danger":"text-success"),children:v})]})})}},29523:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(16620);function a(){return(0,s.createBrowserClient)("https://crejvlwlntwyezdtfofb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNyZWp2bHdsbnR3eWV6ZHRmb2ZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NjIwMzUsImV4cCI6MjA3NDQzODAzNX0.ut1DvOMlPcAz-DoOCyQMWgbQGLWca24u_LOunInrrTU")}},70028:(e,t,r)=>{Promise.resolve().then(r.bind(r,2276))}},e=>{e.O(0,[729,794,620,409,823,441,255,358],()=>e(e.s=70028)),_N_E=e.O()}]);